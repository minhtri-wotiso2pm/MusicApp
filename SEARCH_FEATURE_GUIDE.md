# ?? TÍNH N?NG TÌM KI?M M?I

## ? ?ã Thêm Thành Công

### 1. ?? Tìm Ki?m Bài Hát

**V? trí**: Ô tìm ki?m phía trên danh sách bài hát (bên ph?i)

**Ch?c n?ng**:
- Tìm ki?m theo tên bài hát (không phân bi?t hoa th??ng)
- Tìm ki?m trong danh sách hi?n t?i:
  - N?u ?ang xem "T?t c? bài hát" ? Tìm trong toàn b? th? vi?n
  - N?u ?ang xem m?t Playlist c? th? ? Ch? tìm trong playlist ?ó
- T? ??ng c?p nh?t k?t qu? khi gõ
- Xóa n?i dung ô tìm ki?m ? Hi?n th? l?i t?t c? bài hát

**Cách dùng**:
1. Gõ tên bài hát vào ô "?? Tìm bài hát..."
2. Danh sách s? t? ??ng filter
3. Click vào bài hát ?? ch?n
4. Xóa text ?? xem l?i t?t c?

**Ví d?**:
- Gõ "test" ? Hi?n th?: "Test Song 1", "Test Song 2", "test music"
- Gõ "yoho" ? Hi?n th?: "Yohoho_1", "Yohoho_2"

---

### 2. ?? Tìm Ki?m Playlist

**V? trí**: Ô tìm ki?m phía trên danh sách playlist (bên trái)

**Ch?c n?ng**:
- Tìm ki?m theo tên playlist (không phân bi?t hoa th??ng)
- Luôn gi? "T?t c? bài hát (Th? vi?n)" ? ??u danh sách
- T? ??ng c?p nh?t k?t qu? khi gõ
- Xóa n?i dung ô tìm ki?m ? Hi?n th? l?i t?t c? playlist

**Cách dùng**:
1. Gõ tên playlist vào ô "?? Tìm playlist..."
2. Danh sách playlist s? t? ??ng filter
3. "T?t c? bài hát (Th? vi?n)" v?n luôn hi?n th?
4. Click vào playlist ?? xem bài hát trong ?ó
5. Xóa text ?? xem l?i t?t c? playlist

**Ví d?**:
- Gõ "rock" ? Hi?n th?: "Rock Classics", "My Rock Music"
- Gõ "kinnn" ? Hi?n th? playlist "kinnn"

---

## ?? Giao Di?n

### Playlist Search Box (Bên Trái)
```
???????????????????????????????
?  ?? TH? VI?N                ?
???????????????????????????????
? ?? Tìm playlist...          ? ? ÔTìm ki?m m?i
???????????????????????????????
? T?t c? bài hát (Th? vi?n)   ?
? kinnn                       ?
? My Favorites                ?
???????????????????????????????
```

### Song Search Box (Bên Ph?i)
```
???????????????????????????????????????????
?  ?? T?t c? bài hát        2 songs       ?
???????????????????????????????????????????
? ?? Tìm bài hát...                       ? ? Ô tìm ki?m m?i
???????????????????????????????????????????
? ? Test Song 2                          ?
? ? Test Song 3                          ?
? ? Yohoho_1                             ?
???????????????????????????????????????????
```

---

## ?? Chi Ti?t K? Thu?t

### Code Behind (MainWindow.xaml.cs)

#### 1. Variables m?i
```csharp
private List<Song> _allSongsInCurrentView = new(); 
// L?u T?T C? bài hát tr??c khi filter

private List<Playlist> _allPlaylists = new(); 
// L?u T?T C? playlist tr??c khi filter
```

#### 2. Methods m?i

**SongSearchBox_TextChanged**:
- Event handler cho ô tìm ki?m bài hát
- Filter `_allSongsInCurrentView` theo keyword
- C?p nh?t `SongList.ItemsSource` v?i k?t qu?
- Toggle placeholder visibility

**PlaylistSearchBox_TextChanged**:
- Event handler cho ô tìm ki?m playlist
- Filter `_allPlaylists` theo keyword
- Gi? "T?t c? bài hát (Th? vi?n)" ? ??u
- Toggle placeholder visibility

#### 3. Updates trong existing methods

**LoadUserPlaylists()**:
```csharp
// NEW: L?u t?t c? playlist ?? filter
_allPlaylists = new List<Playlist>();
_allPlaylists.Add(new Playlist { PlaylistId = -1, PlaylistName = "T?t c? bài hát (Th? vi?n)" });
_allPlaylists.AddRange(_playlists);

// Clear search box
PlaylistSearchBox.Text = "";
```

**LoadLibrarySongs()**:
```csharp
// NEW: L?u ?? filter
_allSongsInCurrentView = new List<Song>(_songs);

// Clear search box
SongSearchBox.Text = "";
```

**LoadSongsFromPlaylist()**:
```csharp
// NEW: L?u ?? filter
_allSongsInCurrentView = new List<Song>(_songs);

// Clear search box
SongSearchBox.Text = "";
```

---

## ?? Troubleshooting

### V?n ??: Ô tìm ki?m không ho?t ??ng
**Gi?i pháp**:
1. Check event handler ?ã ???c register ch?a:
   - `TextChanged="SongSearchBox_TextChanged"`
   - `TextChanged="PlaylistSearchBox_TextChanged"`
2. Check placeholder có ?úng tên không:
   - `SongSearchPlaceholder`
   - `PlaylistSearchPlaceholder`

### V?n ??: Placeholder không ?n khi gõ
**Nguyên nhân**: `IsHitTestVisible="False"` có th? b? thi?u
**Gi?i pháp**: Check XAML có ??y ?? properties:
```xaml
<TextBlock x:Name="SongSearchPlaceholder"
           IsHitTestVisible="False"
           Visibility="Visible"/>
```

### V?n ??: Search không tìm ???c ti?ng Vi?t
**Nguyên nhân**: `StringComparison.OrdinalIgnoreCase` không support diacritics
**Gi?i pháp**: Có th? thêm normalize string ?? remove d?u

---

## ?? Testing Checklist

### Tìm Ki?m Bài Hát
- [ ] Gõ tên bài hát ? Filter ?úng
- [ ] Gõ không có k?t qu? ? Hi?n th? "No songs in list"
- [ ] Xóa text ? Hi?n th? l?i t?t c?
- [ ] Chuy?n playlist ? Search box t? ??ng clear
- [ ] Placeholder ?n khi gõ, hi?n khi r?ng
- [ ] Không phân bi?t hoa th??ng

### Tìm Ki?m Playlist
- [ ] Gõ tên playlist ? Filter ?úng
- [ ] "T?t c? bài hát (Th? vi?n)" v?n luôn hi?n th?
- [ ] Xóa text ? Hi?n th? l?i t?t c?
- [ ] Placeholder ?n khi gõ, hi?n khi r?ng
- [ ] Không phân bi?t hoa th??ng
- [ ] Context menu "Thêm vào playlist" c?p nh?t theo filter

---

## ?? Next Steps (Tính N?ng M? R?ng)

### 1. Advanced Search
- Tìm theo Artist
- Tìm theo Album
- Tìm theo th? lo?i (Genre)
- Tìm theo n?m phát hành

### 2. Search History
- L?u l?i các t? khóa tìm ki?m g?n ?ây
- Dropdown g?i ý khi click vào ô search

### 3. Fuzzy Search
- Tìm ki?m g?n ?úng (typo tolerance)
- Dùng Levenshtein distance ho?c Soundex

### 4. Highlight Matches
- Highlight ph?n text match trong k?t qu?
- Bold ho?c màu khác cho keyword

### 5. Filter Options
- Checkbox ?? filter theo IsFavorite
- Filter theo FileType (mp3, mp4, wav)
- Filter theo Duration (< 3 phút, 3-5 phút, > 5 phút)

---

## ?? Summary

? **?ã thêm thành công 2 ch?c n?ng tìm ki?m:**
1. Tìm ki?m bài hát trong Library ho?c Playlist hi?n t?i
2. Tìm ki?m Playlist theo tên

? **Tính n?ng chính:**
- Real-time search (update khi gõ)
- Case-insensitive (không phân bi?t hoa th??ng)
- Placeholder text v?i icon ??p
- T? ??ng clear search khi chuy?n view

? **Build thành công** - S?n sàng test!

?? Happy Music Searching! ??
